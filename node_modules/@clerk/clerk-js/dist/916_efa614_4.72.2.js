"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[916],{2916:function(e,t,i){i.d(t,{A:function(){return p}});var n=i(4380),a=i(4041),o=i(5220),r=i(4740),l=i(9333),s=i(2932),u=i(2407),c=i(2234),d=i(3150),g=i(6912),m=i(1228),v=i(699),h=i(4683);const p=e=>{const t=(0,s.useCardState)(),i=(0,o.Xi)({onNextStep:()=>t.setError(void 0)}),p=a.useRef(null),{createOrganization:b,isLoaded:f,setActive:z,userMemberships:x}=(0,r.useCoreOrganizationList)({userMemberships:h.mu.userMemberships}),{organization:S}=(0,r.useCoreOrganization)(),[_,C]=a.useState(),Y=(0,d.tJ)("name","",{type:"text",label:(0,c.GQ)("formFieldLabel__organizationName"),placeholder:(0,c.GQ)("formFieldInputPlaceholder__organizationName")}),F=(0,d.tJ)("slug","",{type:"text",label:(0,c.GQ)("formFieldLabel__organizationSlug"),placeholder:(0,c.GQ)("formFieldInputPlaceholder__organizationSlug")}),P=!!Y.value,T=()=>{var t;e.navigateAfterCreateOrganization(p.current),null===(t=e.onComplete)||void 0===t||t.call(e)},y=e=>{F.setValue(e)},R="organizationList"===e.flow?"xlargeMedium":void 0,B="organizationList"===e.flow?"headingRegularRegular":void 0;return(0,n.FD)(o.sQ,{...i.props,children:[(0,n.Y)(s.ContentPage,{Breadcrumbs:null,headerTitle:e.startPage.headerTitle,headerSubtitle:e.startPage.headerSubtitle,headerTitleTextVariant:R,headerSubtitleTextVariant:B,sx:e=>({minHeight:e.sizes.$60}),children:(0,n.FD)(s.Form.Root,{onSubmit:async n=>{var a,o;if(n.preventDefault(),P&&f)try{const t=await b({name:Y.value,slug:F.value});if(_&&await t.setLogo({file:_}),p.current=t,await z({organization:t}),null===(a=x.revalidate)||void 0===a||a.call(x),null!==(o=e.skipInvitationScreen)&&void 0!==o?o:1===t.maxAllowedMemberships)return T();i.nextStep()}catch(r){(0,d.H4)(r,[Y,F],t.setError)}},children:[(0,n.Y)(v.i,{organization:{name:Y.value},onAvatarChange:async e=>await C(e),onAvatarRemove:_?()=>(t.setIdle(),C(null)):null,avatarPreviewPlaceholder:(0,n.Y)(s.IconButton,{variant:"ghost",colorScheme:"neutral","aria-label":"Upload organization logo",icon:(0,n.Y)(l.Icon,{size:"md",icon:u._O,sx:e=>({transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$11,height:e.sizes.$11,borderRadius:e.radii.$md,backgroundColor:e.colors.$avatarBackground,":hover":{backgroundColor:d.Tj.makeTransparent(e.colors.$avatarBackground,.2),svg:{transform:"scale(1.2)"}}})})}),(0,n.Y)(s.Form.ControlRow,{elementId:Y.id,children:(0,n.Y)(s.Form.Control,{sx:{flexBasis:"80%"},autoFocus:!0,...Y.props,onChange:e=>{Y.setValue(e.target.value),y((0,d.e9)(e.target.value))},required:!0})}),(0,n.Y)(s.Form.ControlRow,{elementId:F.id,children:(0,n.Y)(s.Form.Control,{sx:{flexBasis:"80%"},...F.props,onChange:e=>{y(e.target.value)},icon:u.ai,required:!0})}),(0,n.FD)(s.FormButtonContainer,{children:[(0,n.Y)(s.Form.SubmitButton,{block:!1,isDisabled:!P,localizationKey:(0,c.GQ)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,n.Y)(s.Form.ResetButton,{localizationKey:(0,c.GQ)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,n.Y)(s.ContentPage,{Breadcrumbs:null,headerTitle:(0,c.GQ)("organizationProfile.invitePage.title"),headerTitleTextVariant:R,headerSubtitleTextVariant:B,sx:e=>({minHeight:e.sizes.$60}),children:S&&(0,n.Y)(g.B,{resetButtonLabel:(0,c.GQ)("createOrganization.invitePage.formButtonReset"),onSuccess:i.nextStep,onReset:T})}),(0,n.Y)(s.SuccessPage,{title:(0,c.GQ)("organizationProfile.invitePage.title"),headerTitleTextVariant:R,contents:(0,n.Y)(m.k,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:T})]})}},6912:function(e,t,i){i.d(t,{B:function(){return h}});var n=i(4380),a=i(9859),o=i(4041),r=i(4740),l=i(9333),s=i(2932),u=i(3209),c=i(2234),d=i(166),g=i(3150),m=i(2596);const v=e=>/^\S+@\S+\.\S+$/.test(e),h=e=>{const{navigate:t}=(0,d.useRouter)(),{onSuccess:i,onReset:u=(()=>t("..")),resetButtonLabel:m}=e,{organization:h,invitations:b}=(0,r.useCoreOrganization)({invitations:{pageSize:10,keepPreviousData:!0}}),f=(0,s.useCardState)(),{t:z,locale:x}=(0,c._R)(),[S,_]=(0,o.useState)(!1),C=(0,g.tJ)("emailAddress","",{type:"text",label:(0,c.GQ)("formFieldLabel__emailAddresses")}),Y=(0,g.tJ)("role","",{label:(0,c.GQ)("formFieldLabel__role")});if(!h)return null;const{props:{setError:F,setWarning:P,setSuccess:T,setInfo:y,validatePassword:R,setHasPassedComplexity:B,hasPassedComplexity:k,feedback:w,feedbackType:$,clearFeedback:D,...I}}=C,L=(!!C.value.length||S)&&!!Y.value;return(0,n.FD)(s.Form.Root,{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);return h.inviteMembers({emailAddresses:C.value.split(","),role:t.get("role")}).then((async()=>{var e;return await(null===(e=null==b?void 0:b.revalidate)||void 0===e?void 0:e.call(b)),i()})).catch((e=>{var t,i,n;if((0,a.$R)(e)&&(e=>{var t,i,n,a;const o=new Set([...null!==(i=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==i?i:[],...null!==(a=null===(n=e.meta)||void 0===n?void 0:n.identifiers)&&void 0!==a?a:[]]),r=C.value.split(",");C.setValue(r.filter((e=>!o.has(e))).join(","))})(e.errors[0]),(0,a.$R)(e)&&"duplicate_record"===(null===(i=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===i?void 0:i.code)){const t=(null===(n=e.errors[0].meta)||void 0===n?void 0:n.emailAddresses)||[];f.setError(z((0,c.GQ)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,g.kS)(t,x)})))}else(0,g.H4)(e,[],f.setError)}))},children:[(0,n.Y)(s.Form.ControlRow,{elementId:C.id,children:(0,n.FD)(l.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.Y)(l.Text,{localizationKey:(0,c.GQ)("formFieldLabel__emailAddresses")}),(0,n.Y)(l.Text,{localizationKey:(0,c.GQ)("formFieldInputPlaceholder__emailAddresses"),colorScheme:"neutral",sx:e=>({fontSize:e.fontSizes.$xs})}),(0,n.Y)(s.TagInput,{...I,autoFocus:!0,validate:v,sx:{width:"100%"},validateUnsubmittedEmail:e=>_(v(e))})]})}),(0,n.Y)(p,{...Y}),(0,n.FD)(s.FormButtonContainer,{children:[(0,n.Y)(s.Form.SubmitButton,{block:!1,isDisabled:!L,localizationKey:(0,c.GQ)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,n.Y)(s.Form.ResetButton,{localizationKey:m||(0,c.GQ)("userProfile.formButtonReset"),block:!1,onClick:u})]})]})},p=e=>{const{options:t,isLoading:i}=(0,u.x)();return(0,n.Y)(s.Form.ControlRow,{elementId:e.id,children:(0,n.FD)(l.Flex,{direction:"col",gap:2,children:[(0,n.Y)(l.Text,{localizationKey:e.label}),(0,n.Y)(m.Vo,{...e.props,roles:t,isDisabled:i,onChange:t=>e.setValue(t),triggerSx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48})})]})})}},1228:function(e,t,i){i.d(t,{k:function(){return h},I:function(){return v}});var n=i(4380),a=i(1857),o=i(5220),r=i(4740),l=i(9333),s=i(2932),u=i(2407),c=i(166);const d=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const i=(0,c.useRouter)();return(0,n.FD)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,n.Y)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,n.FD)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,a.Mo)(t)," members.",(0,n.Y)("br",{}),(0,n.Y)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,a.Mo)(e)),children:"Upgrade for unlimited members"})]})]})};var g=i(6912),m=i(9428);const v=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),i=(0,s.useCardState)(),u=(0,o.Xi)({onNextStep:()=>i.setError(void 0)}),{organization:c}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:v,__unstable_manageBillingMembersLimit:p}=(0,r.useOrganizationProfileContext)();if(!c)return null;const b=!!p&&(0,a.Mo)(p)<=c.pendingInvitationsCount+c.membersCount;return(0,n.FD)(o.sQ,{...u.props,children:[(0,n.FD)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:m.p,children:[b&&v&&(0,n.Y)(d,{__unstable_manageBillingUrl:v,__unstable_manageBillingMembersLimit:p}),(0,n.Y)(g.B,{onSuccess:u.nextStep})]}),(0,n.Y)(s.SuccessPage,{title:e,contents:(0,n.Y)(h,{}),Breadcrumbs:m.p})]})})),h=()=>(0,n.FD)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,n.Y)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:u.Ps}),(0,n.Y)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},2596:function(e,t,i){i.d(t,{Vo:function(){return c},Yq:function(){return u},bQ:function(){return l}});var n=i(4380),a=(i(4041),i(9333)),o=i(2932),r=i(3209);const l=e=>{const{headers:t,page:i,onPageChange:r,rows:l,isLoading:u,itemCount:c,itemsPerPage:d,pageCount:g,emptyStateLocalizationKey:m}=e,v=c>0?Math.max(0,(i-1)*d)+1:0,h=Math.min(i*d,c);return(0,n.FD)(a.Col,{gap:4,sx:{width:"100%"},children:[(0,n.Y)(a.Flex,{sx:{overflowX:"auto"},children:(0,n.FD)(a.Table,{sx:{width:"100%"},children:[(0,n.Y)(a.Thead,{children:(0,n.Y)(a.Tr,{children:t.map(((e,t)=>(0,n.Y)(a.Th,{elementDescriptor:a.descriptors.tableHead,localizationKey:e},t)))})}),(0,n.Y)(a.Tbody,{children:u?(0,n.Y)(a.Tr,{children:(0,n.Y)(a.Td,{colSpan:4,children:(0,n.Y)(a.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"}})})}):l.length?l:(0,n.Y)(s,{localizationKey:m},"empty")})]})}),(0,n.Y)(o.Pagination,{count:g,page:i,onChange:r,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:v,endingRow:h}})]})},s=e=>(0,n.Y)(a.Tr,{children:(0,n.Y)(a.Td,{colSpan:4,children:(0,n.Y)(a.Text,{localizationKey:e.localizationKey,sx:e=>({margin:"auto",display:"block",width:"fit-content",fontSize:e.fontSizes.$xs})})})}),u=e=>(0,n.Y)(a.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$blackAlpha50}})}),c=e=>{const{value:t,roles:i,onChange:a,isDisabled:l,triggerSx:s,optionListSx:u}=e,c=!i,d=[{label:"admin",value:"admin"},{label:"basic_member",value:"basic_member"}],{localizeCustomRole:g}=(0,r.l)(),m=[...i||[],...d,{label:"guest_member",value:"guest_member"}].find((e=>e.value===t)),v=(c?d:i).map((e=>({value:e.value,label:g(e.value)||e.label})));return(0,n.FD)(o.Select,{elementId:"role",options:v,value:t,onChange:e=>a(e.value),children:[(0,n.Y)("input",{name:"role",type:"hidden",value:t}),(0,n.Y)(o.SelectButton,{sx:s||(e=>({color:e.colors.$colorTextSecondary,backgroundColor:"transparent"})),isDisabled:l,children:g(null==m?void 0:m.value)||(null==m?void 0:m.label)}),(0,n.Y)(o.SelectOptionList,{sx:u})]})}},699:function(e,t,i){i.d(t,{i:function(){return r}});var n=i(4380),a=i(2932),o=i(2234);const r=e=>{const{organization:t,...i}=e;return(0,n.Y)(a.AvatarUploader,{...i,title:(0,o.GQ)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,n.Y)(a.OrganizationAvatar,{size:e=>e.sizes.$11,...t})})}},9428:function(e,t,i){i.d(t,{l:function(){return s},p:function(){return u}});var n=i(4380),a=(i(4041),i(5220)),o=i(2237),r=i(4740),l=i(2932);const s=e=>{const{organization:t}=(0,r.useCoreOrganization)(),{pages:i}=(0,r.useOrganizationProfileContext)(),{isAuthorizedUser:s}=(0,a.Zj)((e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"})));return t?(0,n.FD)(l.NavbarContextProvider,{children:[(0,n.Y)(l.NavBar,{header:(0,n.Y)(l.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:i.routes.filter((e=>e.id!==o.j.MEMBERS||e.id===o.j.MEMBERS&&s)),contentRef:e.contentRef}),e.children]}):null},u=e=>{const{pages:t}=(0,r.useOrganizationProfileContext)();return(0,n.Y)(l.Breadcrumbs,{...e,pageToRootNavbarRoute:t.pageToRootNavbarRouteMap})}},4683:function(e,t,i){i.d(t,{l_:function(){return a},mu:function(){return n},sZ:function(){return o}});const n={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},a=(e,t)=>void 0===t?[{data:[e],total_count:1}]:t.map((t=>{if(void 0===t)return t;const i=t.data.map((t=>t.id===e.id?{...e}:t));return{...t,data:i}})),o=(e,t)=>{var i;const n=null===(i=null==t?void 0:t[t.length-1])||void 0===i?void 0:i.total_count;if(n)return null==t?void 0:t.map((t=>{if(void 0===t)return t;const i=t.data.filter((t=>t.id!==e.id));return{...t,data:i,total_count:n-1}}))}}}]);