"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[787],{5685:function(e,i,t){t.r(i),t.d(i,{SignUp:function(){return D},SignUpModal:function(){return x}});var r=t(4380),a=t(4041),n=t(9251),o=t(4740),s=t(9333),l=t(166),d=t(2932),c=t(1241),u=t(3150),m=t(8436);const p=e=>{const{handleSubmit:i,fields:t,formState:a,canToggleEmailPhone:n,handleEmailPhoneToggle:o}=e,{showOptionalFields:l}=(0,s.useAppearance)().parsedLayout,c=e=>{var i;return"emailAddress"!==e&&"phoneNumber"!==e||!n?!!t[e]&&(l||(null===(i=t[e])||void 0===i?void 0:i.required)):!!t[e]};return(0,r.FD)(d.Form.Root,{onSubmit:i,children:[(c("firstName")||c("lastName"))&&(0,r.FD)(d.Form.ControlRow,{elementId:"name",children:[c("firstName")&&(0,r.Y)(d.Form.Control,{...a.firstName.props,isRequired:t.firstName.required,isOptional:!t.firstName.required}),c("lastName")&&(0,r.Y)(d.Form.Control,{...a.lastName.props,isRequired:t.lastName.required,isOptional:!t.lastName.required})]}),c("username")&&(0,r.Y)(d.Form.ControlRow,{elementId:"username",children:(0,r.Y)(d.Form.Control,{...a.username.props,isRequired:t.username.required,isOptional:!t.username.required})}),c("emailAddress")&&(0,r.Y)(d.Form.ControlRow,{elementId:"emailAddress",children:(0,r.Y)(d.Form.Control,{...a.emailAddress.props,isRequired:t.emailAddress.required,isOptional:!t.emailAddress.required,actionLabel:n?"Use phone instead":void 0,onActionClicked:n?()=>o("phoneNumber"):void 0})}),c("phoneNumber")&&(0,r.Y)(d.Form.ControlRow,{elementId:"phoneNumber",children:(0,r.Y)(d.Form.Control,{...a.phoneNumber.props,isRequired:t.phoneNumber.required,isOptional:!t.phoneNumber.required,actionLabel:n?"Use email instead":void 0,onActionClicked:n?()=>o("emailAddress"):void 0})}),c("password")&&(0,r.Y)(d.Form.ControlRow,{elementId:"password",children:(0,r.Y)(d.Form.Control,{...a.password.props,isRequired:t.password.required,isOptional:!t.password.required})}),(0,r.FD)(s.Col,{center:!0,children:[(0,r.Y)(m.j,{}),(0,r.Y)(d.Form.SubmitButton,{children:"Continue"})]})]})};var f=t(6874);const h=["emailAddress","phoneNumber","username","firstName","lastName","password","ticket"];function v(e){return h.reduce(((i,t)=>{const r=function(e,i){switch(e){case"emailAddress":return function({attributes:e,hasTicket:i,hasEmail:t,activeCommIdentifierType:r,isProgressiveSignUp:a}){if(a){if(!(!i||i&&t)||!e.email_address.enabled)return;if(g(e,a)&&"emailAddress"!==r)return;return{required:e.email_address.required,disabled:!!i&&!!t}}if((!i||i&&t)&&e.email_address.enabled&&e.email_address.used_for_first_factor&&"emailAddress"==r)return{required:!0,disabled:!!i&&!!t}}(i);case"phoneNumber":return function({attributes:e,hasTicket:i,activeCommIdentifierType:t,isProgressiveSignUp:r}){if(r){if(!e.phone_number.enabled)return;if(g(e,r)&&"phoneNumber"!==t)return;return{required:e.phone_number.required}}if(!i&&e.phone_number.enabled&&e.phone_number.used_for_first_factor&&"phoneNumber"==t)return{required:!0}}(i);case"password":return function(e){if(e.password.enabled&&e.password.required)return{required:e.password.required}}(i.attributes);case"ticket":return function(e){if(e)return{required:!0}}(i.hasTicket);case"username":case"firstName":case"lastName":return function(e,i){const t=(0,f.C8)(e);if(i[t].enabled)return{required:i[t].required}}(e,i.attributes);default:return}}(t,e);return r&&(i[t]=r),i}),{})}const b=(e,i)=>{if(g(e,i))return"emailAddress";const{email_address:t,phone_number:r}=e;return(t.enabled&&i?t.required:t.used_for_first_factor)?"emailAddress":(r.enabled&&i?r.required:r.used_for_first_factor)?"phoneNumber":null};function g(e,i){const{email_address:t,phone_number:r}=e;return i?t.enabled&&r.enabled&&!t.required&&!r.required:t.used_for_first_factor&&r.used_for_first_factor}var y=t(7453),U=t(9351),_=t(7708);const C=a.memo((e=>{const i=(0,o.useCoreClerk)(),{navigate:t}=(0,l.useRouter)(),a=(0,d.useCardState)(),{displayConfig:n}=(0,U.O)(),s=(0,o.useSignUpContext)(),c=(0,o.useCoreSignUp)(),m=(0,y.u)(s,n.signUpUrl),p=s.afterSignUpUrl||n.afterSignUpUrl,{continueSignUp:f=!1,...h}=e;return(0,r.Y)(_.V,{...h,oauthCallback:e=>c.authenticateWithRedirect({continueSignUp:f,redirectUrl:m,redirectUrlComplete:p,strategy:e,unsafeMetadata:s.unsafeMetadata}).catch((e=>(0,u.H4)(e,[],a.setError))),web3Callback:()=>i.authenticateWithMetamask({customNavigate:t,redirectUrl:p,signUpContinueUrl:"continue",unsafeMetadata:s.unsafeMetadata}).catch((e=>(0,u.H4)(e,[],a.setError)))})}));var S=t(5547);const A=(0,d.withCardStateProvider)((function(){var e,i,t,n;const m=(0,c.f0)(),f=(0,o.useCoreClerk)(),{navigate:h}=(0,l.useRouter)(),{displayConfig:y,userSettings:U}=(0,o.useEnvironment)(),{attributes:_}=U,{navigateAfterSignUp:A,signInUrl:F,unsafeMetadata:N,initialValues:Y={}}=(0,o.useSignUpContext)(),E=(0,o.useCoreSignUp)(),w=U.signUp.progressive,[P,k]=a.useState(b(_,U.signUp.progressive));if(!E.id)return h(y.signUpUrl),(0,r.Y)(d.LoadingCard,{});const K={firstName:(0,u.tJ)("firstName",Y.firstName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,u.tJ)("lastName",Y.lastName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,u.tJ)("emailAddress",Y.emailAddress||"",{type:"email",label:(0,s.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,u.tJ)("username",Y.username||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__username"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__username")}),phoneNumber:(0,u.tJ)("phoneNumber",Y.phoneNumber||"",{type:"tel",label:(0,s.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,u.tJ)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__password"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0})},z=!!K.emailAddress.value,I="verified"==(null===(i=null===(e=E.verifications)||void 0===e?void 0:e.externalAccount)||void 0===i?void 0:i.status),L="verified"==(null===(n=null===(t=E.verifications)||void 0===t?void 0:t.web3Wallet)||void 0===n?void 0:n.status),T=v({attributes:_,hasEmail:z,activeCommIdentifierType:P,signUp:E,isProgressiveSignUp:w});!function(e,i){var t,r,a,n,o,s,l,d;if(i){const c=!!i.emailAddress,u="verified"==(null===(r=null===(t=i.verifications)||void 0===t?void 0:t.emailAddress)||void 0===r?void 0:r.status),m="verified"==(null===(n=null===(a=i.verifications)||void 0===a?void 0:a.phoneNumber)||void 0===n?void 0:n.status),p="verified"==(null===(s=null===(o=i.verifications)||void 0===o?void 0:o.externalAccount)||void 0===s?void 0:s.status),f="verified"==(null===(d=null===(l=i.verifications)||void 0===l?void 0:l.web3Wallet)||void 0===d?void 0:d.status);(c||u)&&delete e.emailAddress,m&&delete e.phoneNumber,(p||f)&&delete e.password,i.firstName&&delete e.firstName,i.lastName&&delete e.lastName,i.username&&delete e.username,Object.entries(e).forEach((([i,t])=>{t&&!t.required&&delete e[i]}))}}(T,E);const R=U.authenticatableSocialStrategies,q=U.web3FirstFactors,O=g(_,w),D=!I&&R.length>0,x=!L&&q.length>0;return(0,r.Y)(s.Flow.Part,{part:"complete",children:(0,r.FD)(d.Card,{children:[(0,r.Y)(d.CardAlert,{children:m.error}),(0,r.FD)(d.Header.Root,{children:[(0,r.Y)(d.Header.Title,{localizationKey:(0,s.localizationKeys)("signUp.continue.title")}),(0,r.Y)(d.Header.Subtitle,{localizationKey:(0,s.localizationKeys)("signUp.continue.subtitle")})]}),(0,r.Y)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:8,children:(0,r.FD)(d.SocialButtonsReversibleContainerWithDivider,{children:[(D||x)&&(0,r.Y)(C,{enableOAuthProviders:D,enableWeb3Providers:x}),(0,r.Y)(p,{handleSubmit:async e=>{var i,t;e.preventDefault();const r=Object.entries(T).reduce(((e,[i,t])=>[...e,...t&&K[i]?[K[i]]:[]]),[]);N&&r.push({id:"unsafeMetadata",value:N});const a=!!(null===(i=r.find((e=>"emailAddress"===e.id)))||void 0===i?void 0:i.value),n=!!(null===(t=r.find((e=>"phoneNumber"===e.id)))||void 0===t?void 0:t.value);return E.missingFields.includes("email_address")&&E.missingFields.includes("phone_number")&&!a&&!n&&g(_,w)&&(r.push(K.emailAddress),r.push(K.phoneNumber)),m.setLoading(),m.setError(void 0),E.update((0,u.mK)(r)).then((e=>(0,S.A)({signUp:e,verifyEmailPath:"./verify-email-address",verifyPhonePath:"./verify-phone-number",handleComplete:()=>f.setActive({session:e.createdSessionId,beforeEmit:A}),navigate:h}))).catch((e=>(0,u.H4)(e,r,m.setError))).finally((()=>m.setIdle()))},fields:T,formState:K,canToggleEmailPhone:O,handleEmailPhoneToggle:e=>{g(_,w)&&k(e)}})]})}),(0,r.FD)(d.Footer.Root,{children:[(0,r.FD)(d.Footer.Action,{elementId:"signUp",children:[(0,r.Y)(d.Footer.ActionText,{localizationKey:(0,s.localizationKeys)("signUp.continue.actionText")}),(0,r.Y)(d.Footer.ActionLink,{localizationKey:(0,s.localizationKeys)("signUp.continue.actionLink"),to:f.buildUrlWithAuth(F)})]}),(0,r.Y)(d.Footer.Links,{})]})]})})}));var F=t(5220);const N=(0,F.K5)(F.Fv);var Y=t(6480),E=t(4927),w=t(7157);const P=(0,F.K5)((0,d.withCardStateProvider)((function(){const e=(0,c.f0)(),i=(0,o.useCoreClerk)(),t=(0,w.mN)(),n=(0,o.useCoreSignUp)(),{showOptionalFields:f}=(0,s.useAppearance)().parsedLayout,{userSettings:h,displayConfig:y}=(0,o.useEnvironment)(),{navigate:U}=(0,l.useRouter)(),{attributes:_}=h,{setActive:A}=(0,o.useCoreClerk)(),N=(0,o.useSignUpContext)(),{navigateAfterSignUp:P,signInUrl:k,unsafeMetadata:K}=N,[z,I]=a.useState(b(_,h.signUp.progressive)),{t:L,locale:T}=(0,s.useLocalizations)(),R=N.initialValues||{},[q,O]=a.useState(!1),{userSettings:{passwordSettings:D}}=(0,o.useEnvironment)(),x={firstName:(0,u.tJ)("firstName",n.firstName||R.firstName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,u.tJ)("lastName",n.lastName||R.lastName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,u.tJ)("emailAddress",n.emailAddress||R.emailAddress||"",{type:"email",label:(0,s.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,u.tJ)("username",n.username||R.username||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__username"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__username")}),phoneNumber:(0,u.tJ)("phoneNumber",n.phoneNumber||R.phoneNumber||"",{type:"tel",label:(0,s.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,u.tJ)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__password"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0,buildErrorMessage:e=>(0,u.C5)(e,{t:L,locale:T,passwordSettings:D})}),ticket:(0,u.tJ)("ticket",(0,E.hI)("__clerk_ticket")||(0,E.hI)("__clerk_invitation_token")||"")},V=!!x.ticket.value,M=!!x.emailAddress.value,H=h.signUp.progressive,B=v({attributes:_,hasTicket:V,hasEmail:M,activeCommIdentifierType:z,isProgressiveSignUp:H});if(a.useLayoutEffect((()=>{x.ticket.value&&(t.setLoading(),e.setLoading(),n.create({strategy:"ticket",ticket:x.ticket.value}).then((e=>(x.emailAddress.setValue(e.emailAddress||""),"missing_requirements"===e.status&&O(!0),(0,S.A)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>A({session:e.createdSessionId,beforeEmit:P}),navigate:U})))).catch((i=>{x.ticket.setValue(""),(0,u.H4)(i,[],e.setError)})).finally((()=>{t.setIdle(),e.setIdle()})))}),[]),a.useEffect((()=>{!async function(){const i=n.verifications.externalAccount.error;if(i){switch(i.code){case Y.OQ.NOT_ALLOWED_TO_SIGN_UP:case Y.OQ.OAUTH_ACCESS_DENIED:case Y.OQ.NOT_ALLOWED_ACCESS:case Y.OQ.SAML_USER_ATTRIBUTE_MISSING:case Y.OQ.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case Y.OQ.USER_LOCKED:e.setError(i);break;default:e.setError("Unable to complete action at this time. If the problem persists please contact support.")}await n.create({})}}()}),[]),t.isLoading)return(0,r.Y)(d.LoadingCard,{});const W=g(_,H),J=Object.entries(B).filter((([e,i])=>f||(null==i?void 0:i.required))),j=function(e){const{authenticatableSocialStrategies:i,web3FirstFactors:t}=e;return e.hasValidAuthFactor||!i.length&&!t.length}(h)&&J.length>0,Q=(!V||q)&&h.authenticatableSocialStrategies.length>0,G=!V&&h.web3FirstFactors.length>0;return(0,r.Y)(s.Flow.Part,{part:"start",children:(0,r.FD)(d.Card,{children:[(0,r.Y)(d.CardAlert,{children:e.error}),(0,r.FD)(d.Header.Root,{children:[(0,r.Y)(d.Header.Title,{localizationKey:(0,s.localizationKeys)("signUp.start.title")}),(0,r.Y)(d.Header.Subtitle,{localizationKey:(0,s.localizationKeys)("signUp.start.subtitle")})]}),(0,r.FD)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:8,children:[(0,r.FD)(d.SocialButtonsReversibleContainerWithDivider,{children:[(Q||G)&&(0,r.Y)(C,{enableOAuthProviders:Q,enableWeb3Providers:G,continueSignUp:q}),j&&(0,r.Y)(p,{handleSubmit:async i=>{var t,r;i.preventDefault();const a=Object.entries(B).reduce(((e,[i,t])=>[...e,...t&&x[i]?[x[i]]:[]]),[]);if(K&&a.push({id:"unsafeMetadata",value:K}),B.ticket){const e=()=>{};a.push({id:"strategy",value:"ticket",setValue:e,onChange:e,setError:e})}const o=!!(null===(t=a.find((e=>"emailAddress"===e.id)))||void 0===t?void 0:t.value),s=!!(null===(r=a.find((e=>"phoneNumber"===e.id)))||void 0===r?void 0:r.value);o||s||!g(_,H)||(a.push(x.emailAddress),a.push(x.phoneNumber)),e.setLoading(),e.setError(void 0);const l=(0,F.uP)(N,y.signUpUrl),d=N.afterSignUpUrl||y.afterSignUpUrl;return n.create((0,u.mK)(a)).then((e=>(0,S.A)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>A({session:e.createdSessionId,beforeEmit:P}),navigate:U,redirectUrl:l,redirectUrlComplete:d}))).catch((i=>(0,u.H4)(i,a,e.setError))).finally((()=>e.setIdle()))},fields:B,formState:x,canToggleEmailPhone:W,handleEmailPhoneToggle:e=>{g(_,H)&&I(e)}})]}),!j&&(0,r.Y)(m.j,{})]}),(0,r.FD)(d.Footer.Root,{children:[(0,r.FD)(d.Footer.Action,{elementId:"signUp",children:[(0,r.Y)(d.Footer.ActionText,{localizationKey:(0,s.localizationKeys)("signUp.start.actionText")}),(0,r.Y)(d.Footer.ActionLink,{localizationKey:(0,s.localizationKeys)("signUp.start.actionLink"),to:i.buildUrlWithAuth(k)})]}),(0,r.Y)(d.Footer.Links,{})]})]})})}))),k=e=>{const{navigateAfterSignUp:i}=(0,o.useSignUpContext)(),{setActive:t}=(0,o.useCoreClerk)(),{navigate:a}=(0,l.useRouter)();return(0,r.Y)(d.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,formTitle:e.formTitle,formSubtitle:e.formSubtitle,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,n,o)=>{e.attempt(r).then((async e=>(await n(),(0,S.A)({signUp:e,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>t({session:e.createdSessionId,beforeEmit:i}),navigate:a})))).catch((e=>o(e)))},onResendCodeClicked:e.prepare,safeIdentifier:e.safeIdentifier,onIdentityPreviewEditClicked:()=>a("../")})},K=()=>{const e=(0,o.useCoreSignUp)(),i=e.verifications.emailAddress.status,t=!e.status||"verified"===i;return(0,w.st)(t?void 0:()=>e.prepareEmailAddressVerification({strategy:"email_code"}),{name:"prepare",strategy:"email_code",number:e.emailAddress},{staleTime:100}),(0,r.Y)(s.Flow.Part,{part:"emailCode",children:(0,r.Y)(k,{cardTitle:(0,s.localizationKeys)("signUp.emailCode.title"),cardSubtitle:(0,s.localizationKeys)("signUp.emailCode.subtitle"),formTitle:(0,s.localizationKeys)("signUp.emailCode.formTitle"),formSubtitle:(0,s.localizationKeys)("signUp.emailCode.formSubtitle"),resendButton:(0,s.localizationKeys)("signUp.emailCode.resendButton"),prepare:()=>{if(!t)return e.prepareEmailAddressVerification({strategy:"email_code"})},attempt:i=>e.attemptEmailAddressVerification({code:i}),safeIdentifier:e.emailAddress})})};var z=t(6910);const I=()=>{const{t:e}=(0,s.useLocalizations)(),i=(0,o.useCoreSignUp)(),t=(0,o.useSignUpContext)(),{navigateAfterSignUp:n}=t,m=(0,c.f0)(),{displayConfig:p}=(0,o.useEnvironment)(),{navigate:f}=(0,l.useRouter)(),{setActive:h}=(0,o.useCoreClerk)(),[v,b]=a.useState(!1),{startEmailLinkFlow:g,cancelEmailLinkFlow:U}=(0,z.u)(i);a.useEffect((()=>{_()}),[]);const _=()=>g({redirectUrl:(0,y.W)(t,p.signUpUrl)}).then((e=>C(e))).catch((e=>{(0,u.H4)(e,[],m.setError)})),C=async i=>{const t=i.verifications.emailAddress;"expired"===t.status?m.setError(e((0,s.localizationKeys)("formFieldError__verificationLinkExpired"))):t.verifiedFromTheSameClient()?b(!0):await(0,S.A)({signUp:i,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>h({session:i.createdSessionId,beforeEmit:n}),navigate:f})};return v?(0,r.Y)(F.$W,{title:(0,s.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,s.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,r.Y)(s.Flow.Part,{part:"emailLink",children:(0,r.Y)(d.VerificationLinkCard,{cardTitle:(0,s.localizationKeys)("signUp.emailLink.title"),cardSubtitle:(0,s.localizationKeys)("signUp.emailLink.subtitle"),formTitle:(0,s.localizationKeys)("signUp.emailLink.formTitle"),formSubtitle:(0,s.localizationKeys)("signUp.emailLink.formSubtitle"),resendButton:(0,s.localizationKeys)("signUp.emailLink.resendButton"),onResendCodeClicked:()=>{U(),_()},safeIdentifier:i.emailAddress})})},L=(0,d.withCardStateProvider)((()=>{const{userSettings:e}=(0,o.useEnvironment)(),{attributes:i}=e;return i.email_address.verifications.includes("email_link")?(0,r.Y)(I,{}):(0,r.Y)(K,{})})),T=(0,d.withCardStateProvider)((()=>{const e=(0,o.useCoreSignUp)(),i=e.verifications.phoneNumber.status,t=!e.status||"verified"===i;return(0,w.st)(t?void 0:()=>e.preparePhoneNumberVerification({strategy:"phone_code"}),{name:"signUp.preparePhoneNumberVerification",strategy:"phone_code",number:e.phoneNumber},{staleTime:100}),(0,r.Y)(s.Flow.Part,{part:"phoneCode",children:(0,r.Y)(k,{cardTitle:(0,s.localizationKeys)("signUp.phoneCode.title"),cardSubtitle:(0,s.localizationKeys)("signUp.phoneCode.subtitle"),formTitle:(0,s.localizationKeys)("signUp.phoneCode.formTitle"),formSubtitle:(0,s.localizationKeys)("signUp.phoneCode.formSubtitle"),resendButton:(0,s.localizationKeys)("signUp.phoneCode.resendButton"),prepare:()=>{if(!t)return e.preparePhoneNumberVerification({strategy:"phone_code"})},attempt:i=>e.attemptPhoneNumberVerification({code:i}),safeIdentifier:e.phoneNumber})})})),R=()=>(0,r.Y)(T,{});function q(){const e=(0,o.useCoreClerk)();return a.useEffect((()=>{e.redirectToSignUp()}),[]),null}function O(){const e=(0,o.useSignUpContext)();return(0,r.Y)(s.Flow.Root,{flow:"signUp",children:(0,r.FD)(l.Switch,{children:[(0,r.Y)(l.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.Y)(L,{})}),(0,r.Y)(l.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.Y)(R,{})}),(0,r.Y)(l.Route,{path:"sso-callback",children:(0,r.Y)(N,{afterSignUpUrl:e.afterSignUpUrl,afterSignInUrl:e.afterSignInUrl,redirectUrl:e.redirectUrl,secondFactorUrl:e.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number"})}),(0,r.Y)(l.Route,{path:"verify",children:(0,r.Y)(n.M,{redirectUrlComplete:e.afterSignUpUrl||e.redirectUrl||void 0,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number"})}),(0,r.FD)(l.Route,{path:"continue",children:[(0,r.Y)(l.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.Y)(L,{})}),(0,r.Y)(l.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.Y)(R,{})}),(0,r.Y)(l.Route,{index:!0,children:(0,r.Y)(A,{})})]}),(0,r.Y)(l.Route,{index:!0,children:(0,r.Y)(P,{})}),(0,r.Y)(l.Route,{children:(0,r.Y)(q,{})})]})})}O.displayName="SignUp";const D=(0,o.withCoreSessionSwitchGuard)(O),x=e=>{const i={signInUrl:`/${l.VIRTUAL_ROUTER_BASE_PATH}/sign-in`,...e};return(0,r.Y)(l.Route,{path:"sign-up",children:(0,r.Y)(o.ComponentContext.Provider,{value:{componentName:"SignUp",...i,routing:"virtual"},children:(0,r.Y)("div",{children:(0,r.Y)(D,{...i,routing:"virtual"})})})})}}}]);