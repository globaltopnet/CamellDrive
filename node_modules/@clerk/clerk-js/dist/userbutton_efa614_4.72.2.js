"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[278],{1906:function(e,t,o){o.r(t),o.d(t,{UserButton:function(){return A}});var n=o(4380),r=o(4041),i=o(8740),s=o(4740),c=o(9333),l=o(2932),u=o(7157),a=o(1311),d=o(2407),p=o(3962);const B=r.forwardRef(((e,t)=>{const{close:o,...r}=e,i=(0,s.useCoreSession)(),{authConfig:u}=(0,s.useEnvironment)(),B=(0,s.useCoreUser)(),{handleAddAccountClicked:v,handleManageAccountClicked:m,handleSessionClicked:g,handleSignOutAllClicked:A,handleSignOutSessionClicked:h,otherSessions:C}=(0,p.u)({...(0,s.useUserButtonContext)(),actionCompleteCallback:o,user:B}),f=(0,n.Y)(l.Action,{icon:d.FW,label:(0,c.localizationKeys)("userButton.action__addAccount"),onClick:v}),P=u.singleSessionMode?null:C.length>0?(0,n.FD)(n.FK,{children:[(0,n.FD)(l.SecondaryActions,{role:"menu",children:[C.map((e=>(0,n.Y)(l.PreviewButton,{icon:d.$s,sx:e=>({height:e.sizes.$14,borderRadius:0}),onClick:g(e),role:"menuitem",children:(0,n.Y)(l.UserPreview,{user:e.user,size:"sm",avatarSx:e=>({margin:`0 calc(${e.space.$3}/2)`})})},e.id))),f]}),(0,n.Y)(l.Actions,{role:"menu",children:(0,n.Y)(l.Action,{icon:d.fh,label:(0,c.localizationKeys)("userButton.action__signOutAll"),onClick:A})})]}):(0,n.Y)(l.SecondaryActions,{role:"menu",children:f});return(0,n.Y)(a.M,{elementDescriptor:c.descriptors.userButtonPopoverRootBox,children:(0,n.FD)(l.PopoverCard.Root,{elementDescriptor:c.descriptors.userButtonPopoverCard,ref:t,role:"dialog","aria-label":"User button popover",...r,children:[(0,n.FD)(l.PopoverCard.Main,{elementDescriptor:c.descriptors.userButtonPopoverMain,children:[(0,n.Y)(l.UserPreview,{elementId:"userButton",user:B,sx:e=>({padding:`0 ${e.space.$6}`,marginBottom:e.space.$2})}),(0,n.FD)(l.Actions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,children:[(0,n.Y)(l.Action,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),textElementDescriptor:c.descriptors.userButtonPopoverActionButtonText,textElementId:c.descriptors.userButtonPopoverActionButtonText.setId("manageAccount"),icon:d.Ko,label:(0,c.localizationKeys)("userButton.action__manageAccount"),onClick:m}),(0,n.Y)(l.Action,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),textElementDescriptor:c.descriptors.userButtonPopoverActionButtonText,textElementId:c.descriptors.userButtonPopoverActionButtonText.setId("signOut"),icon:d.Mt,label:(0,c.localizationKeys)("userButton.action__signOut"),onClick:h(i)})]}),P]}),(0,n.Y)(l.PopoverCard.Footer,{elementDescriptor:c.descriptors.userButtonPopoverFooter})]})})})),v=(0,l.withAvatarShimmer)((0,r.forwardRef)(((e,t)=>{const{sx:o,...r}=e,i=(0,s.useCoreUser)();return(0,n.Y)(c.Button,{elementDescriptor:c.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:e.radii.$circle}),o],ref:t,"aria-label":(e.isOpen?"Close":"Open")+" user button","aria-expanded":e.isOpen,"aria-haspopup":"dialog",...r,children:(0,n.Y)(l.UserAvatar,{boxElementDescriptor:c.descriptors.userButtonAvatarBox,imageElementDescriptor:c.descriptors.userButtonAvatarImage,...i,size:e=>e.sizes.$8})})}))),m=(0,l.withFloatingTree)((()=>{const{defaultOpen:e}=(0,s.useUserButtonContext)(),{floating:t,reference:o,styles:i,toggle:a,isOpen:d,nodeId:p,context:m}=(0,u.fP)({defaultOpen:e,placement:"bottom-end",offset:8}),A=(0,r.useId)();return(0,n.Y)(c.Flow.Root,{flow:"userButton",children:(0,n.FD)(c.Flex,{elementDescriptor:c.descriptors.userButtonBox,isOpen:d,align:"center",gap:2,children:[(0,n.Y)(g,{}),(0,n.Y)(v,{ref:o,onClick:a,isOpen:d,"aria-controls":A}),(0,n.Y)(l.Popover,{nodeId:p,context:m,isOpen:d,children:(0,n.Y)(B,{id:A,close:a,ref:t,style:{...i}})})]})})})),g=()=>{const e=(0,s.useCoreUser)(),{showName:t}=(0,s.useUserButtonContext)();return t?(0,n.Y)(c.Text,{variant:"regularMedium",elementDescriptor:c.descriptors.userButtonOuterIdentifier,children:(0,i.dS)(e)||(0,i.Cm)(e)}):null},A=(0,s.withCoreUserGuard)((0,l.withCardStateProvider)(m))},3962:function(e,t,o){o.d(t,{u:function(){return u}});var n=o(7780),r=o(3132),i=o(4740),s=o(2932),c=o(166),l=o(3150);const u=e=>{const{setActive:t,signOut:o,openUserProfile:u}=(0,i.useCoreClerk)(),a=(0,s.useCardState)(),d=(0,i.useCoreSessionList)(),{navigate:p}=(0,c.useRouter)(),B=d.filter((e=>"active"===e.status)),v=B.filter((t=>{var o,n;return(null===(o=t.user)||void 0===o?void 0:o.id)!==(null===(n=e.user)||void 0===n?void 0:n.id)}));return{handleSignOutSessionClicked:t=>()=>0===v.length?o(e.navigateAfterSignOut):o(e.navigateAfterMultiSessionSingleSignOut,{sessionId:t.id}).finally((()=>a.setIdle())),handleManageAccountClicked:()=>{var t,o,r;return"navigation"===e.userProfileMode?p(e.userProfileUrl||"").finally((()=>{(async()=>{var t;await(0,l.yy)(300),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)})()})):((null===(t=e.appearance)||void 0===t?void 0:t.userProfile)&&(0,n.W1)(e.appearance,"userProfile","Use `<UserButton userProfileProps={{appearance: {...}}} />` instead."),u({appearance:null===(o=e.appearance)||void 0===o?void 0:o.userProfile,...e.userProfileProps}),null===(r=e.actionCompleteCallback)||void 0===r?void 0:r.call(e))},handleSignOutAllClicked:()=>o(e.navigateAfterSignOut),handleSessionClicked:o=>async()=>(a.setLoading(),t({session:o,beforeEmit:e.navigateAfterSwitchSession}).finally((()=>{var t;a.setIdle(),null===(t=e.actionCompleteCallback)||void 0===t||t.call(e)}))),handleAddAccountClicked:()=>((0,r.y)(e.signInUrl||window.location.href),(0,l.yy)(2e3)),otherSessions:v,activeSessions:B}}}}]);