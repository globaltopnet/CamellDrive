{"version":3,"file":"RNIContextMenuButton.js","sourceRoot":"","sources":["../../../src/native_components/RNIContextMenuButton/RNIContextMenuButton.ts"],"names":[],"mappings":"AACA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAqB,UAAU,EAAQ,MAAM,cAAc,CAAC;AAEnE,OAAO,EAAE,kBAAkB,EAAE,MAAM,4BAA4B,CAAC;AAEhE,OAAO,EAAE,0BAA0B,EAAE,MAAM,8BAA8B,CAAC;AAC1E,OAAO,EAAE,0BAA0B,EAAE,MAAM,8BAA8B,CAAC;AAM1E,MAAM,OAAO,oBAAqB,SAAQ,KAAK,CAAC,aAAwC;IAEtF,SAAS,CAAQ;IACjB,QAAQ,CAAU;IAElB,YAAY,KAAgC;QAC1C,KAAK,CAAC,KAAK,CAAC,CAAC;IACf,CAAC;IAAA,CAAC;IAEF,oBAAoB;QAClB,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1C,IAAG,OAAO,QAAQ,KAAK,QAAQ;YAAE,OAAO;QAExC,kBAAkB,CAAC,4BAA4B,CAC7C,QAAQ,EAAE;YACR,kBAAkB,EAAE,IAAI;YACxB,2BAA2B,EAAE,KAAK;SACnC,CACF,CAAC;IACJ,CAAC;IAAA,CAAC;IAEF,YAAY,GAA2B,GAAG,EAAE;QAC1C,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC,CAAC;IAEF,iBAAiB,GAA6B,GAAG,EAAE;QACjD,aAAa;QACb,OAAO,IAAI,CAAC,SAAS,EAAE,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC;IACpD,CAAC,CAAC;IAEF,WAAW,GAAG,KAAK,IAAI,EAAE;QACvB,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1C,IAAG,OAAO,QAAQ,KAAK,QAAQ;YAAE,OAAO;QAExC,MAAM,0BAA0B,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IACzD,CAAC,CAAC;IAEF,WAAW,GAAG,KAAK,IAAI,EAAE;QACvB,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1C,IAAG,OAAO,QAAQ,KAAK,QAAQ;YAAE,OAAO;QAExC,MAAM,0BAA0B,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;IACzD,CAAC,CAAC;IAEF,uBAAuB,GAAG,KAAK,EAC7B,UAAkB,EAClB,SAA8B,EAC9B,EAAE;QACF,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1C,IAAG,OAAO,QAAQ,KAAK,QAAQ;YAAE,OAAO;QAExC,MAAM,0BAA0B,CAAC,uBAAuB,CAAC,QAAQ,EAAE;YACjE,UAAU;YACV,SAAS;SACV,CAAC,CAAC;IACL,CAAC,CAAC;IAEM,kBAAkB,GAAG,CAAC,GAAS,EAAE,EAAE;QACzC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;IACvB,CAAC,CAAC;IAEM,eAAe,GAAG,CAAC,EAAC,WAAW,EAAoB,EAAE,EAAE;QAC7D,aAAa;QACb,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,MAAM,CAAC;IACrC,CAAC,CAAC;IAEF,MAAM;QACJ,OAAO,KAAK,CAAC,aAAa,CAAC,0BAA0B,EAAE;YACrD,GAAG,IAAI,CAAC,KAAK;YACb,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI;gBAC7B,QAAQ,EAAE,IAAI,CAAC,eAAe;aAC/B,CAAC;YACF,KAAK,EAAE;gBACL,IAAI,CAAC,KAAK,CAAC,KAAK;gBAChB,MAAM,CAAC,UAAU;aAClB;YACD,aAAa;YACb,GAAG,EAAE,IAAI,CAAC,kBAAkB;SAC7B,CAAC,CAAC;IACL,CAAC;IAAA,CAAC;CACH;AAAA,CAAC;AAEF,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;IAC/B,UAAU,EAAE,EACX;CACF,CAAC,CAAC","sourcesContent":["\nimport * as React from 'react';\nimport { LayoutChangeEvent, StyleSheet, View } from 'react-native';\n\nimport { RNIUtilitiesModule } from 'react-native-ios-utilities';\n\nimport { RNIContextMenuButtonModule } from './RNIContextMenuButtonModule';\nimport { RNIContextMenuNativeButton } from './RNIContextMenuNativeButton';\n\nimport type { RNIContextMenuButtonProps } from './RNIContextMenuButtonTypes';\nimport { MenuElementConfig } from '../../types/MenuConfig';\n\n\nexport class RNIContextMenuButton extends React.PureComponent<RNIContextMenuButtonProps> {\n  \n  nativeRef?: View;\n  reactTag?: number;\n\n  constructor(props: RNIContextMenuButtonProps){\n    super(props);\n  };\n\n  componentWillUnmount(){\n    const reactTag = this.getNativeReactTag();\n    if(typeof reactTag !== 'number') return;\n\n    RNIUtilitiesModule.notifyOnComponentWillUnmount(\n      reactTag, {\n        shouldForceCleanup: true,\n        shouldIgnoreCleanupTriggers: false,\n      }\n    );\n  };\n\n  getNativeRef: () => View | undefined = () => {\n    return this.nativeRef;\n  };\n\n  getNativeReactTag: () => number | undefined = () => {\n    // @ts-ignore\n    return this.nativeRef?.nativeTag ?? this.reactTag;\n  };\n\n  presentMenu = async () => {\n    const reactTag = this.getNativeReactTag();\n    if(typeof reactTag !== 'number') return;\n\n    await RNIContextMenuButtonModule.presentMenu(reactTag);\n  };\n\n  dismissMenu = async () => {\n    const reactTag = this.getNativeReactTag();\n    if(typeof reactTag !== 'number') return;\n\n    await RNIContextMenuButtonModule.dismissMenu(reactTag);\n  };\n\n  provideDeferredElements = async (\n    deferredID: string, \n    menuItems: MenuElementConfig[]\n  ) => {\n    const reactTag = this.getNativeReactTag();\n    if(typeof reactTag !== 'number') return;\n\n    await RNIContextMenuButtonModule.provideDeferredElements(reactTag, { \n      deferredID, \n      menuItems \n    });\n  };\n\n  private _handleOnNativeRef = (ref: View) => {\n    this.nativeRef = ref;\n  };\n\n  private _handleOnLayout = ({nativeEvent}: LayoutChangeEvent) => {\n    // @ts-ignore\n    this.reactTag = nativeEvent.target;\n  };\n\n  render(){\n    return React.createElement(RNIContextMenuNativeButton, {\n      ...this.props,\n      ...((this.reactTag == null) && {\n        onLayout: this._handleOnLayout,\n      }),\n      style: [\n        this.props.style,\n        styles.nativeView\n      ],\n      // @ts-ignore\n      ref: this._handleOnNativeRef,\n    });\n  };\n};\n\nconst styles = StyleSheet.create({\n  nativeView: {\n  },\n});"]}