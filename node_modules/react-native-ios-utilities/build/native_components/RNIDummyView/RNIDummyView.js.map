{"version":3,"file":"RNIDummyView.js","sourceRoot":"","sources":["../../../src/native_components/RNIDummyView/RNIDummyView.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAqB,UAAU,EAAQ,MAAM,cAAc,CAAC;AAEnE,OAAO,EAAE,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AAC1D,OAAO,EAAE,kBAAkB,EAAE,MAAM,sBAAsB,CAAC;AAK1D,MAAM,OAAO,YAAa,SAAQ,KAAK,CAAC,aAAgC;IAEtE,SAAS,CAAQ;IACjB,QAAQ,CAAU;IAElB,YAAY,KAAwB;QAClC,KAAK,CAAC,KAAK,CAAC,CAAC;IACf,CAAC;IAAA,CAAC;IAEF,QAAQ;QACN,MAAM,EACJ,mCAAmC,EACnC,GAAG,SAAS,EACb,GAAG,IAAI,CAAC,KAAK,CAAC;QAEf,OAAO;YACL,mCAAmC,EACjC,mCAAmC,IAAI,KAAK;YAE9C,SAAS;SACV,CAAC;IACJ,CAAC;IAAA,CAAC;IAEF,oBAAoB;QAClB,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,CAAC;IAC3C,CAAC;IAAA,CAAC;IAEF,YAAY,GAA2B,GAAG,EAAE;QAC1C,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC,CAAC;IAEF,iBAAiB,GAA6B,GAAG,EAAE;QACjD,aAAa;QACb,OAAO,IAAI,CAAC,SAAS,EAAE,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC;IACpD,CAAC,CAAC;IAEF,4BAA4B,GAAG,KAAK,EAClC,sBAA+B,IAAI,EACnC,EAAE;QACF,MAAM,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC1C,IAAG,OAAO,QAAQ,KAAK,QAAQ;YAAE,OAAO;QAExC,MAAM,kBAAkB,CAAC,4BAA4B,CACnD,QAAQ,EACR,mBAAmB,CACpB,CAAC;IACJ,CAAC,CAAC;IAEM,kBAAkB,GAAG,CAAC,GAAS,EAAE,EAAE;QACzC,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;IACvB,CAAC,CAAC;IAEM,eAAe,GAAG,CAAC,KAAwB,EAAE,EAAE;QACrD,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC;QAE7B,aAAa;QACb,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC;IAC3C,CAAC,CAAC;IAEF,MAAM;QACJ,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC9B,MAAM,cAAc,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC;QAE7C,OAAO,KAAK,CAAC,aAAa,CAAC,kBAAkB,EAAE;YAC7C,GAAG,KAAK,CAAC,SAAS;YAClB,KAAK,EAAE;gBACL,KAAK,CAAC,SAAS,CAAC,KAAK;gBACrB,MAAM,CAAC,UAAU;aAClB;YACD,aAAa;YACb,GAAG,EAAE,IAAI,CAAC,kBAAkB;YAC5B,QAAQ,EAAE,CAAC,cAAc;gBACvB,CAAC,CAAC,SAAS;gBACX,CAAC,CAAC,IAAI,CAAC,eAAe,CACvB;YACD,mCAAmC,EACjC,KAAK,CAAC,mCAAmC;SAC5C,CAAC,CAAC;IACL,CAAC;IAAA,CAAC;CACH;AAAA,CAAC;AAEF,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;IAC/B,UAAU,EAAE;QACV,QAAQ,EAAE,UAAU;QACpB,OAAO,EAAE,IAAI;KACd;CACF,CAAC,CAAC","sourcesContent":["import * as React from 'react';\nimport { LayoutChangeEvent, StyleSheet, View } from 'react-native';\n\nimport { RNIDummyViewModule } from './RNIDummyViewModule';\nimport { RNIDummyNativeView } from './RNIDummyNativeView';\n\nimport type { RNIDummyViewProps } from './RNIDummyViewTypes';\n\n\nexport class RNIDummyView extends React.PureComponent<RNIDummyViewProps> {\n  \n  nativeRef?: View;\n  reactTag?: number;\n\n  constructor(props: RNIDummyViewProps){\n    super(props);\n  };\n\n  getProps() {\n    const { \n      shouldCleanupOnComponentWillUnmount, \n      ...viewProps \n    } = this.props;\n\n    return {\n      shouldCleanupOnComponentWillUnmount: \n        shouldCleanupOnComponentWillUnmount ?? false,\n\n      viewProps,\n    };\n  };\n\n  componentWillUnmount(){\n    this.notifyOnComponentWillUnmount(false);\n  };\n\n  getNativeRef: () => View | undefined = () => {\n    return this.nativeRef;\n  };\n\n  getNativeReactTag: () => number | undefined = () => {\n    // @ts-ignore\n    return this.nativeRef?.nativeTag ?? this.reactTag;\n  };\n\n  notifyOnComponentWillUnmount = async (\n    isManuallyTriggered: boolean = true\n  ) => {\n    const reactTag = this.getNativeReactTag();\n    if(typeof reactTag !== 'number') return;\n\n    await RNIDummyViewModule.notifyOnComponentWillUnmount(\n      reactTag, \n      isManuallyTriggered\n    );\n  };\n\n  private _handleOnNativeRef = (ref: View) => {\n    this.nativeRef = ref;\n  };\n\n  private _handleOnLayout = (event: LayoutChangeEvent) => {\n    this.props.onLayout?.(event);\n\n    // @ts-ignore\n    this.reactTag = event.nativeEvent.target;\n  };\n\n  render(){\n    const props = this.getProps();\n    const didSetReactTag = this.reactTag != null;\n\n    return React.createElement(RNIDummyNativeView, {\n      ...props.viewProps,\n      style: [\n        props.viewProps.style,\n        styles.nativeView,        \n      ],\n      // @ts-ignore\n      ref: this._handleOnNativeRef,\n      onLayout: (didSetReactTag \n        ? undefined\n        : this._handleOnLayout\n      ),\n      shouldCleanupOnComponentWillUnmount: \n        props.shouldCleanupOnComponentWillUnmount,\n    });\n  };\n};\n\nconst styles = StyleSheet.create({\n  nativeView: {\n    position: 'absolute',\n    opacity: 0.01,\n  },\n});"]}